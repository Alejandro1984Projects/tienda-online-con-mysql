<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<title></title>
<style>
        #titulo{color: white; background-color: lightgray;}
        #titulo label{margin-left: 15px;}
        #menu{border: 1px solid;}
        #menu label{color: black; margin-left: 15px;}
        #sectionbotones{text-align: center; margin-top: 70px;}
        #sectionbotones button{margin-top:30px;}
        #titulotabla{margin-top:30px; text-align: center;}
        #sectiontabla div{margin-left: 500px;}
        #divtotalventas{
        margin-top:30px;
        margin-left: 700px;
        margin-right: 300px;}
    </style>
    <script>
    function borrarTabla(){
    	const tablahead=document.querySelector("#tablahead");
		tablahead.innerHTML="";
		const tablabody=document.querySelector("#tablabody");
		tablabody.innerHTML="";
		const divtotalventas=document.querySelector("#divtotalventas");
		divtotalventas.innerHTML="";		
    }
        function comenzar(){
        	var listausuarios=document.getElementById("listausuarios");           
        	listausuarios.addEventListener("click",function(){
        		borrarTabla();
        		const titulotabla=document.querySelector("#titulotabla");
        		titulotabla.innerHTML="Listado de Usuarios";
        		const tablahead=document.querySelector("#tablahead");
        		const trhead=document.createElement("tr");
        		let tdcedulahead=document.createElement("td");
        		let tdnombrehead=document.createElement("td");
        		let tdcorreohead=document.createElement("td");
        		let tdusuariohead=document.createElement("td");
        		let tdpasswordhead=document.createElement("td");
        		
        		tdcedulahead.appendChild(
        				document.createTextNode(`${"Cedula"}`));
        		tdnombrehead.appendChild(
        				document.createTextNode(`${"Nombre"}`));
        		tdcorreohead.appendChild(
        				document.createTextNode(`${"CorreoElectronico"}`));
        		tdusuariohead.appendChild(
        				document.createTextNode(`${"Usuario"}`));
        		tdpasswordhead.appendChild(
        				document.createTextNode(`${"Password"}`));
        		
        		trhead.appendChild(tdcedulahead);
        		trhead.appendChild(tdnombrehead);
        		trhead.appendChild(tdcorreohead);
        		trhead.appendChild(tdusuariohead);
        		trhead.appendChild(tdpasswordhead);
        		
        		tablahead.appendChild(trhead);
        		
        		const HTMLResponse=document.querySelector("#tablabody");
        		
        		fetch('http://localhost:5000/usuarios/listar')
        		.then(response => response.json())
                .then(usuarios => {  
                	if(usuarios.length!=0){
                	usuarios.forEach((usuario)=>{
                		const tr=document.createElement("tr");
                		let tdcedula=document.createElement("td");
                		let tdnombre=document.createElement("td");
                		let tdcorreo=document.createElement("td");
                		let tdusuario=document.createElement("td");
                		let tdpassword=document.createElement("td");
                		
                		tdcedula.appendChild(
                				document.createTextNode(`${usuario.cedula_usuario}`));
                		tdnombre.appendChild(
                				document.createTextNode(`${usuario.nombre_usuario}`));
                		tdcorreo.appendChild(
                				document.createTextNode(`${usuario.email_usuario}`));
                		tdusuario.appendChild(
                				document.createTextNode(`${usuario.usuario}`));
                		tdpassword.appendChild(
                				document.createTextNode(`${usuario.password}`));
                		
                		tr.appendChild(tdcedula);
                		tr.appendChild(tdnombre);
                		tr.appendChild(tdcorreo);
                		tr.appendChild(tdusuario);
                		tr.appendChild(tdpassword);                		
                		
                		HTMLResponse.appendChild(tr);
                	});  
                	}else{
                		titulotabla.innerHTML="";
                		borrarTabla();
                		alert("La lista esta vacia");
                	}                	
                });
                },false);
        	
        	var listaclientes=document.getElementById("listaclientes");           
        	listaclientes.addEventListener("click",function(){
        		borrarTabla();
        		const titulotabla=document.querySelector("#titulotabla");
        		titulotabla.innerHTML="Listado de Clientes";
        		const tablahead=document.querySelector("#tablahead");
        		const trhead=document.createElement("tr");
        		let tdcedulahead=document.createElement("td");
        		let tdnombrehead=document.createElement("td");
        		let tdcorreohead=document.createElement("td");
        		let tddireccionhead=document.createElement("td");
        		let tdtelefonohead=document.createElement("td");
        		
        		tdcedulahead.appendChild(
        				document.createTextNode(`${"Cedula"}`));
        		tdnombrehead.appendChild(
        				document.createTextNode(`${"Nombre"}`));
        		tdcorreohead.appendChild(
        				document.createTextNode(`${"CorreoElectronico"}`));
        		tddireccionhead.appendChild(
        				document.createTextNode(`${"Direccion"}`));
        		tdtelefonohead.appendChild(
        				document.createTextNode(`${"Telefono"}`));
        		
        		trhead.appendChild(tdcedulahead);
        		trhead.appendChild(tdnombrehead);
        		trhead.appendChild(tdcorreohead);
        		trhead.appendChild(tddireccionhead);
        		trhead.appendChild(tdtelefonohead);
        		
        		tablahead.appendChild(trhead);
        		
        		const HTMLResponse=document.querySelector("#tablabody");
        		fetch('http://localhost:5000/clientes/listar')
        		.then(response => response.json())
                .then(clientes => { 
                	if(clientes.length!=0){
                	clientes.forEach((cliente)=>{
                		const tr=document.createElement("tr");
                		let tdcedula=document.createElement("td");
                		let tdnombre=document.createElement("td");
                		let tdcorreo=document.createElement("td");
                		let tddireccion=document.createElement("td");
                		let tdtelefono=document.createElement("td");
                		
                		tdcedula.appendChild(
                				document.createTextNode(`${cliente.cedula_cliente}`));
                		tdnombre.appendChild(
                				document.createTextNode(`${cliente.nombre_cliente}`));
                		tdcorreo.appendChild(
                				document.createTextNode(`${cliente.email_cliente}`));
                		tddireccion.appendChild(
                				document.createTextNode(`${cliente.direccion_cliente}`));
                		tdtelefono.appendChild(
                				document.createTextNode(`${cliente.telefono_cliente}`));
                		
                		tr.appendChild(tdcedula);
                		tr.appendChild(tdnombre);
                		tr.appendChild(tdcorreo);
                		tr.appendChild(tddireccion);
                		tr.appendChild(tdtelefono);
                		
                		HTMLResponse.appendChild(tr);
                	});
                	}else{
                		titulotabla.innerHTML="";
                		borrarTabla();
                		alert("La lista esta vacia");
                	}
                });
                },false);
        	var listaventas=document.getElementById("listaventas");           
        	listaventas.addEventListener("click",function(){
        		borrarTabla();
        		var mostrartotal=0;
        		const titulotabla=document.querySelector("#titulotabla");
        		titulotabla.innerHTML="Total de Ventas por Cliente";
        		const tablahead=document.querySelector("#tablahead");
        		const divtotalventas=document.querySelector("#divtotalventas");
        		const trhead=document.createElement("tr");
        		let tdcedulahead=document.createElement("td");
        		let tdnombrehead=document.createElement("td");
        		let tdventahead=document.createElement("td");
        		
        		tdcedulahead.appendChild(
        				document.createTextNode(`${"Cedula"}`));
        		tdnombrehead.appendChild(
        				document.createTextNode(`${"Nombre"}`));
        		tdventahead.appendChild(
        				document.createTextNode(`${"Valor Total Ventas"}`));
        		
        		trhead.appendChild(tdcedulahead);
        		trhead.appendChild(tdnombrehead);
        		trhead.appendChild(tdventahead);
        		
        		tablahead.appendChild(trhead); 		
        		
        		const HTMLResponse=document.querySelector("#tablabody");
        		fetch('http://localhost:5000/ventas/listar')
        		.then(response => response.json())
                .then(array => { 
                	if(array.length!=0){
                	array.forEach((json)=>{
                		
                		const tr=document.createElement("tr");
                		let tdcedula=document.createElement("td");
                		let tdnombre=document.createElement("td");
                		let tdventa=document.createElement("td");
                		
                		tdcedula.appendChild(
                				document.createTextNode(`${json.cedula_cliente}`));
                		tdnombre.appendChild(
                				document.createTextNode(`${json.nombre_cliente}`));
                		tdventa.appendChild(
                				document.createTextNode(`${json.total_venta}`));
                		
                		tr.appendChild(tdcedula);
                		tr.appendChild(tdnombre);
                		tr.appendChild(tdventa);
                		
                		HTMLResponse.appendChild(tr);                		
                		mostrartotal=mostrartotal+json.total_venta;

                	});    
                	divtotalventas.innerHTML="Total Ventas  "+mostrartotal;
                	}else{
                		titulotabla.innerHTML="";
                		borrarTabla();
                		alert("La lista esta vacia");
                	}
                });
                },false);
                
        	var etiquetareportes=document.getElementById("reportes");
        	etiquetareportes.style.backgroundColor="lightgray";
        	var etiquetas=document.getElementsByName("opcion");
            etiquetas.forEach(function(etiqueta){
                etiqueta.addEventListener("mouseover",function(){
                etiqueta.style.backgroundColor="lightgray";},false);
                etiqueta.addEventListener("mouseleave" ,function(){
                etiqueta.style.backgroundColor="white";
            	etiquetareportes.style.backgroundColor="lightgray";
                },false);           
            });
        }
        window.addEventListener("load", comenzar,false);
    </script>
</head>
<body>
<section>
        <div id="titulo">
            <label for="">
                Tienda Generica
            </label>
        </div>
        <div id="menu">
            <label name="opcion" onclick="location.href='Usuarios.html';">
            Usuarios</label>
            <label name="opcion" onclick="location.href='Clientes.html';">
            Clientes</label>
            <label name="opcion" onclick="location.href='Proveedores.html';">
            Proveedores</label>
            <label name="opcion" onclick="location.href='Productos.html';">
            Productos</label>
            <label name="opcion" onclick="location.href='Ventas.html';">
            Ventas</label>
            <label name="opcion" id="reportes">
            Reportes</label>                         
        </div>
    </section>
    <section id="sectionbotones">
    	<button id="listausuarios">Listado de Usuarios</button>
    	<br>
        <button id="listaclientes">Listado de Clientes</button>
        <br>
        <button id="listaventas">Ventas por Cliente</button>    
    </section>
    <div id="titulotabla"></div>
    <section id="sectiontabla">
    <div id="divtabla">
    <table>
    <thead id="tablahead"></thead>
    <tbody id="tablabody"></tbody>
    </table>
    </div>
    </section>
    <section><div id="divtotalventas"></div></section>
</body>
</html>